<!DOCTYPE html>

<div style="margin-bottom:20px;">
  <a href="index.html">ðŸ§® Kalkulator</a> |
  <a href="mobilisering.html">ðŸ“˜ FÃ¸rste mobilisering</a>
</div>


<html lang="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LOK Â§9F Reisetid & Diett kalkulator</title>

<style>
body{
    font-family:Arial, sans-serif;
    background:#f3f4f6;
    margin:0;
    padding:20px;
}
.container{
    max-width:900px;
    margin:auto;
}
.card{
    background:white;
    padding:20px;
    margin-bottom:15px;
    border-radius:12px;
    box-shadow:0 4px 10px rgba(0,0,0,0.08);
}
label{
    font-weight:bold;
    display:block;
    margin-top:12px;
}
input,select{
    width:100%;
    padding:8px;
    margin-top:4px;
    border:1px solid #ccc;
    border-radius:6px;
}
.row{ display:flex; gap:10px; }

.result{
    background:#111827;
    color:white;
    padding:20px;
    border-radius:12px;
}
.big{
    font-size:28px;
    font-weight:bold;
}
img{
    width:100%;
    border-radius:10px;
    margin-top:10px;
}
.small{
    font-size:13px;
    color:#666;
}
</style>
</head>

<body>

<div class="container">

<div class="card">
<h1>LOK Â§9F Reisetid & Diett kalkulator</h1>

<p class="small">
Reisetid: 50% overtid.<br>
Diett gis pÃ¥ 7 rotasjoner (hver vei).<br>
BelÃ¸p fordeles som gjennomsnitt per rotasjon.
</p>

<label>Rotasjon</label>
<select id="rotation">
<option value="35">14/21 (35 dager syklus)</option>
<option value="35">15/20 (35 dager syklus)</option>
</select>

<label>FÃ¸rste arbeidsdag</label>
<input type="date" id="startDate">

<label>Reisetid Ã©n vei</label>
<div class="row">
<input type="number" id="hours" value="6" placeholder="Timer">
<input type="number" id="minutes" value="0" placeholder="Minutter">
</div>

<label>TimeslÃ¸nn (kr)</label>
<input type="number" id="rate" value="293.56" step="0.01">

<label>Diett sats (hver vei)</label>
<select id="dietRate">
<option value="0">0â€“6 timer (0 kr)</option>
<option value="384">6â€“12 timer (384 kr)</option>
<option value="713">Over 12 timer uten overnatting (713 kr)</option>
<option value="977">Med overnatting (977 kr)</option>
</select>

<label>Betalbare rotasjoner</label>
<input type="number" id="paidTrips" value="7">

</div>

<div class="card">
<h2>Diett satser (LOK Â§9 K)</h2>

<!-- Works locally + on Vercel -->
<img src="./reise.png" alt="Diett satser">

</div>

<div class="result">
<p>Rotasjoner per Ã¥r: <b id="rotations"></b></p>
<p>Timesats inkl 50% OT: <b id="otRate"></b> kr</p>
<p>Reisetid tur/retur: <b id="travelPerTrip"></b> kr</p>
<p>Diett tur/retur: <b id="dietPerTrip"></b> kr</p>
<p>Total pr Ã¥r: <b id="yearTotal"></b> kr</p>
<hr>
<p class="big">
Gjennomsnitt pr rotasjon:
<span id="avgPerRotation"></span> kr
</p>
</div>

</div>

<script>

function countRotations(startDate, cycleDays){
    if(!startDate) return 0;

    let start = new Date(startDate);
    let end = new Date(start);
    end.setFullYear(end.getFullYear()+1);

    let count = 0;
    let current = new Date(start);

    while(current < end){
        count++;
        current.setDate(current.getDate()+cycleDays);
    }
    return count;
}

function calc(){

    let startDate = document.getElementById("startDate").value;
    let cycle = parseInt(document.getElementById("rotation").value);

    let hours = parseFloat(document.getElementById("hours").value)||0;
    let minutes = parseFloat(document.getElementById("minutes").value)||0;
    let rate = parseFloat(document.getElementById("rate").value)||0;
    let paidTrips = parseFloat(document.getElementById("paidTrips").value)||0;
    let dietRate = parseFloat(document.getElementById("dietRate").value)||0;

    let rotations = countRotations(startDate, cycle);

    let totalHours = hours + (minutes/60);
    let overtimeRate = rate * 1.5;

    let travelPerTrip = totalHours * 2 * overtimeRate;
    let dietPerTrip = dietRate * 2;

    let yearTotal = (travelPerTrip + dietPerTrip) * paidTrips;
    let avgPerRotation = rotations > 0 ? yearTotal / rotations : 0;

    document.getElementById("rotations").innerText = rotations;
    document.getElementById("otRate").innerText = overtimeRate.toFixed(2);
    document.getElementById("travelPerTrip").innerText = travelPerTrip.toFixed(2);
    document.getElementById("dietPerTrip").innerText = dietPerTrip.toFixed(2);
    document.getElementById("yearTotal").innerText = yearTotal.toFixed(2);
    document.getElementById("avgPerRotation").innerText = avgPerRotation.toFixed(2);
}

document.querySelectorAll("input,select").forEach(el=>{
    el.addEventListener("input",calc);
});

calc();

</script>

</body>
</html>

